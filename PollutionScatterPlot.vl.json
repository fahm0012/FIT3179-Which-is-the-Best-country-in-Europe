{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "width": 580,
  "height": 400,
  "title": {"text": "Pollution Reported per European Country", "fontSize": 20},
  "data": {
    "values": [
      {
        "country": "Austria",
        "Size (kmSquare)": 83879,
        "Population": 8736668,
        "PercentageofreportedPollution": 10.7,
        "Region": "Western Europe",
        "LifeExpectancy": 81.8,
        "avg_high_temp": 54.2,
        "avg_low_temp": 37.4,
        "avg_precipitation": 39.3
      },
      {
        "country": "Belgium",
        "Size (kmSquare)": 30689,
        "Population": 11331422,
        "PercentageofreportedPollution": 13.2,
        "Region": "Western Europe",
        "LifeExpectancy": 81.5,
        "avg_high_temp": 55.5,
        "avg_low_temp": 42,
        "avg_precipitation": 33.1
      },
      {
        "country": "Bulgaria",
        "Size (kmSquare)": 110994,
        "Population": 7127822,
        "PercentageofreportedPollution": 15.1,
        "Region": "Eastern Europe",
        "LifeExpectancy": 74.9,
        "avg_high_temp": 59.3,
        "avg_low_temp": 43.4,
        "avg_precipitation": 24.7
      },
      {
        "country": "Switzerland",
        "Size (kmSquare)": 41285,
        "Population": 8373338,
        "PercentageofreportedPollution": 8.9,
        "Region": "Western Europe",
        "LifeExpectancy": 83.7,
        "avg_high_temp": 62.3,
        "avg_low_temp": 48,
        "avg_precipitation": 41.1
      },
      {
        "country": "Cyprus",
        "Size (kmSquare)": 9251,
        "Population": 1170187,
        "PercentageofreportedPollution": 9.2,
        "Region": "Southeastern Europe",
        "LifeExpectancy": 82.7,
        "avg_high_temp": 75.1,
        "avg_low_temp": 57.5,
        "avg_precipitation": 15.4
      },
      {
        "country": "Czechia",
        "Size (kmSquare)": 78866,
        "Population": 10566332,
        "PercentageofreportedPollution": 13.5,
        "Region": "Eastern Europe",
        "LifeExpectancy": 79.1,
        "avg_high_temp": 51.4,
        "avg_low_temp": 37.3,
        "avg_precipitation": 27.4
      },
      {
        "country": "Germany",
        "Size (kmSquare)": 357386,
        "Population": 82348669,
        "PercentageofreportedPollution": 23.2,
        "Region": "Western Europe",
        "LifeExpectancy": 81,
        "avg_high_temp": 51.4,
        "avg_low_temp": 41.6,
        "avg_precipitation": 23.9
      },
      {
        "country": "Denmark",
        "Size (kmSquare)": 42933,
        "Population": 5728010,
        "PercentageofreportedPollution": 6.8,
        "Region": "Northern Europe",
        "LifeExpectancy": 80.9,
        "avg_high_temp": 48.4,
        "avg_low_temp": 35.9,
        "avg_precipitation": 25.6
      },
      {
        "country": "Estonia",
        "Size (kmSquare)": 45227,
        "Population": 1315790,
        "PercentageofreportedPollution": 9.9,
        "Region": "Northern Europe",
        "LifeExpectancy": 78,
        "avg_high_temp": 43.9,
        "avg_low_temp": 31.3,
        "avg_precipitation": 21.9
      },
      {
        "country": "Greece",
        "Size (kmSquare)": 131957,
        "Population": 10775971,
        "PercentageofreportedPollution": 19.6,
        "Region": "Southern Europe",
        "LifeExpectancy": 81.5,
        "avg_high_temp": 60.5,
        "avg_low_temp": 45.6,
        "avg_precipitation": 30.7
      },
      {
        "country": "Spain",
        "Size (kmSquare)": 505990,
        "Population": 46440000,
        "PercentageofreportedPollution": 10.1,
        "Region": "Southern Europe",
        "LifeExpectancy": 83.5,
        "avg_high_temp": 54,
        "avg_low_temp": 40.5,
        "avg_precipitation": 29.4
      },
      {
        "country": "Finland",
        "Size (kmSquare)": 338440,
        "Population": 5487000,
        "PercentageofreportedPollution": 7.2,
        "Region": "Northern Europe",
        "LifeExpectancy": 81.5,
        "avg_high_temp": 70.1,
        "avg_low_temp": 53.9,
        "avg_precipitation": 25.3
      },
      {
        "country": "Croatia",
        "Size (kmSquare)": 56594,
        "Population": 41910000,
        "PercentageofreportedPollution": 7,
        "Region": "Southern Europe",
        "LifeExpectancy": 78.2,
        "avg_high_temp": 43.1,
        "avg_low_temp": 34.2,
        "avg_precipitation": 38.1
      },
      {
        "country": "Hungary",
        "Size (kmSquare)": 93030,
        "Population": 9830000,
        "PercentageofreportedPollution": 12.8,
        "Region": "Eastern Europe",
        "LifeExpectancy": 76.2,
        "avg_high_temp": 55.2,
        "avg_low_temp": 44,
        "avg_precipitation": 40.8
      },
      {
        "country": "Ireland",
        "Size (kmSquare)": 84421,
        "Population": 4726000,
        "PercentageofreportedPollution": 4.6,
        "Region": "Northern Europe",
        "LifeExpectancy": 81.8,
        "avg_high_temp": 63.8,
        "avg_low_temp": 49.1,
        "avg_precipitation": 30.4
      },
      {
        "country": "Iceland",
        "Size (kmSquare)": 103000,
        "Population": 332529,
        "PercentageofreportedPollution": 7.9,
        "Region": "Northern Europe",
        "LifeExpectancy": 82.2,
        "avg_high_temp": 48.8,
        "avg_low_temp": 38.2,
        "avg_precipitation": 23.2
      },
      {
        "country": "Italy",
        "Size (kmSquare)": 301338,
        "Population": 60670000,
        "PercentageofreportedPollution": 15.1,
        "Region": "Southern Europe",
        "LifeExpectancy": 83.4,
        "avg_high_temp": 49.6,
        "avg_low_temp": 36.9,
        "avg_precipitation": 26.3
      },
      {
        "country": "Lithuania",
        "Size (kmSquare)": 65300,
        "Population": 2889000,
        "PercentageofreportedPollution": 15.6,
        "Region": "Northern Europe",
        "LifeExpectancy": 74.9,
        "avg_high_temp": 54.6,
        "avg_low_temp": 41.2,
        "avg_precipitation": 32.4
      },
      {
        "country": "Luxembourg",
        "Size (kmSquare)": 2586,
        "Population": 576249,
        "PercentageofreportedPollution": 16.1,
        "Region": "Western Europe",
        "LifeExpectancy": 82.7,
        "avg_high_temp": 72.3,
        "avg_low_temp": 59.1,
        "avg_precipitation": 22
      },
      {
        "country": "Latvia",
        "Size (kmSquare)": 64589,
        "Population": 1969000,
        "PercentageofreportedPollution": 17.2,
        "Region": "Northern Europe",
        "LifeExpectancy": 74.9,
        "avg_high_temp": 55.1,
        "avg_low_temp": 43.7,
        "avg_precipitation": 29.7
      },
      {
        "country": "Malta",
        "Size (kmSquare)": 316,
        "Population": 450415,
        "PercentageofreportedPollution": 30.2,
        "Region": "Southern Europe",
        "LifeExpectancy": 82.6,
        "avg_high_temp": 44.1,
        "avg_low_temp": 33.8,
        "avg_precipitation": 44.2
      },
      {
        "country": "Netherlands",
        "Size (kmSquare)": 41543,
        "Population": 16980000,
        "PercentageofreportedPollution": 13.2,
        "Region": "Western Europe",
        "LifeExpectancy": 81.7,
        "avg_high_temp": 56.2,
        "avg_low_temp": 33.8,
        "avg_precipitation": 24.6
      },
      {
        "country": "Poland",
        "Size (kmSquare)": 312679,
        "Population": 37970000,
        "PercentageofreportedPollution": 11.4,
        "Region": "Eastern Europe",
        "LifeExpectancy": 78,
        "avg_high_temp": 57.1,
        "avg_low_temp": 41.1,
        "avg_precipitation": 24.7
      },
      {
        "country": "Portugal",
        "Size (kmSquare)": 92212,
        "Population": 10340000,
        "PercentageofreportedPollution": 13.1,
        "Region": "Southern Europe",
        "LifeExpectancy": 81.3,
        "avg_high_temp": 53,
        "avg_low_temp": 36,
        "avg_precipitation": 26.2
      },
      {
        "country": "Romania",
        "Size (kmSquare)": 238397,
        "Population": 19760000,
        "PercentageofreportedPollution": 14.5,
        "Region": "Eastern Europe",
        "LifeExpectancy": 75.3,
        "avg_high_temp": 53.8,
        "avg_low_temp": 38.7,
        "avg_precipitation": 49.1
      },
      {
        "country": "Sweden",
        "Size (kmSquare)": 450295,
        "Population": 9851000,
        "PercentageofreportedPollution": 6.3,
        "Region": "Northern Europe",
        "LifeExpectancy": 82.4,
        "avg_high_temp": 69.3,
        "avg_low_temp": 52.3,
        "avg_precipitation": 21.7
      },
      {
        "country": "Slovenia",
        "Size (kmSquare)": 20271,
        "Population": 2064000,
        "PercentageofreportedPollution": 15.9,
        "Region": "Southern Europe",
        "LifeExpectancy": 81.2,
        "avg_high_temp": 46.7,
        "avg_low_temp": 33.6,
        "avg_precipitation": 22.6
      },
      {
        "country": "Slovakia",
        "Size (kmSquare)": 49035,
        "Population": 5426000,
        "PercentageofreportedPollution": 9.3,
        "Region": "Eastern Europe",
        "LifeExpectancy": 77.3,
        "avg_high_temp": 50.8,
        "avg_low_temp": 35.8,
        "avg_precipitation": 46.7
      },
      {
        "country": "Turkey",
        "Size (kmSquare)": 783562,
        "Population": 78740000,
        "PercentageofreportedPollution": 24.5,
        "Region": "Southeastern Europe",
        "LifeExpectancy": 78.1,
        "avg_high_temp": 63.9,
        "avg_low_temp": 44.6,
        "avg_precipitation": 25.7
      },
      {
        "country": "United Kingdom",
        "Size (kmSquare)": 242495,
        "Population": 65380000,
        "PercentageofreportedPollution": 9,
        "Region": "Northern Europe",
        "LifeExpectancy": 81.2,
        "avg_high_temp": 55.3,
        "avg_low_temp": 42.9,
        "avg_precipitation": 29.7
      }
    ]
  },
  "params": [
    {
      "name": "Population_Above",
      "value": 0,
      "bind": {
        "input": "range",
        "min": 0,
        "max": 30,
        "step": 5,
        "name": "Pollution Reported(%): "
      }
    },
    {
      "name": "Continent_selection",
      "bind": {
        "input": "select",
        "options": [
          null,
          "Southern Europe",
          "Northern Europe",
          "Eastern Europe",
          "Western Europe",
          "Southeastern Europe"
        ],
        "labels": [
          "Show All",
          "Southern Europe",
          "Northern Europe",
          "Eastern Europe",
          "Western Europe",
          "Southeastern Europe"
        ],
        "name": "Region Selection: "
      }
    }
  ],
  "transform": [
    {
      "filter": "Continent_selection == null || datum.Region == Continent_selection"
    },
    {"filter": "datum.PercentageofreportedPollution > Population_Above"}
  ],
  "encoding": {
    "x": {
      "field": "Size (kmSquare)",
      "type": "quantitative",
      "axis": {
        "title": " Area Size(KmSquare)",
        "tickCount": 4,
        "labelFontSize": 15,
        "titleFontSize": 15
      },
      "scale": {"type": "log", "domain": [100, 1000000]}
    },
    "y": {
      "field": "Population",
      "type": "quantitative",
      "axis": {"tickCount": 6, "labelFontSize": 15, "titleFontSize": 15},
      "scale": {"type": "log", "domain": [1000, 1000000000]}
    }
  },
  "layer": [
    {
      "selection": {
        "continent_highlight": {
          "type": "multi",
          "fields": ["Region"],
          "bind": "legend"
        }
      },
      "mark": "circle",
      "encoding": {
        "x": {
          "field": "Size (kmSquare)",
          "type": "quantitative",
          "axis": {
            "title": " Area Size(KmSquare)",
            "tickCount": 4,
            "labelFontSize": 15,
            "titleFontSize": 15
          },
          "scale": {"type": "log", "domain": [100, 1000000]}
        },
        "y": {
          "field": "Population",
          "type": "quantitative",
          "axis": {"tickCount": 6, "labelFontSize": 15, "titleFontSize": 15},
          "scale": {"type": "log", "domain": [1000, 1000000000]}
        },
        "color": {
          "legend": {
            "title": "Region",
            "titleFontSize": 15,
            "labelFontSize": 15
          },
          "field": "Region",
          "type": "nominal",
          "scale": {
            "domain": [
              "Southern Europe",
              "Northern Europe",
              "Eastern Europe",
              "Western Europe",
              "Southeastern Europe"
            ],
            "range": ["#e41a1c", "#984ea3", "#ff7f00", "#377eb8", "#a6cee3"]
          }
        },
        "opacity": {
          "condition": {"selection": "continent_highlight", "value": 0.8},
          "value": 0.2
        },
        "size": {
          "field": "PercentageofreportedPollution",
          "type": "quantitative",
          "scale": {
            "type": "threshold",
            "domain": [5, 10, 15, 20, 30],
            "range": [10, 50, 150, 200, 300, 400]
          },
          "legend": {
            "format": ".1s",
            "title": "Pollution Reported (%)",
            "titleFontSize": 15,
            "labelFontSize": 15
          }
        },
        "tooltip": [
          {"field": "country", "type": "nominal", "title": "Country"},
          {"field": "Population", "type": "quantitative", "format": ","},
          {
            "field": "LifeExpectancy",
            "type": "quantitative",
            "title": "Life Expectancy",
            "format": ","
          },
          {
            "field": "PercentageofreportedPollution",
            "type": "quantitative",
            "title": " Pollution Reported(%)",
            "format": ","
          },
          {
            "field": "avg_high_temp",
            "type": "quantitative",
            "title": "Average High Temperature(°C)",
            "format": ".2f"
          },
          {
            "field": "avg_low_temp",
            "type": "quantitative",
            "title": "Average Low Temperature(°C)",
            "format": ".2f"
          }
        ]
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "right",
        "baseline": "middle",
        "dx": -12,
        "fontSize": 11.5,
        "fontStyle": "italic"
      },
      "encoding": {
        "text": {"field": "country", "type": "nominal"},
        "color": {"value": "black"},
        "opacity": {
          "condition": {
            "test": "datum['country'] == 'Slovenia' || datum['country'] == 'Sweden' || datum['country'] == 'Romania' || datum['country'] == 'United Kingdom' || datum['country'] == 'Netherlands' || datum['country'] == 'Malta' ||  datum['country'] == 'Iceland'",
            "value": 1
          },
          "value": 0
        }
      }
    }
  ],
  "config": {}
}
